---
layout: post
title: 'Insomnia'
date: '2025-02-05'
---

This one is working with the insomnia subreddit posts and comments section. 

I am curious about the following: 

- Sample size, how many unique posters and commenters are there
- Identifying the most mentioned insomnia drugs in the subreddit
- How awareness of different drugs/brands changed through time
- What time are people up and posting

Eventually, do a sentiment analysis or emotion detection link to each drug?

Many thanks to Arthur Heitmann for his work with the Artict Shift project, which I used to extract the data from the subreddit.
Check it out here:
https://github.com/ArthurHeitmann/arctic_shift

Steps so far:
1. Get the jsonl into a DataFrame
2. Clean it; take out "deleted" authors from posts and comments, and work with only the columns I find useful
3. Put together texts columns ("post", "selftext", or "body" columns), export it, and run it through a GPT to get drugs mentioned
4. Get all drugs mentioned to a list, do the sentiment analysis on those drugs

Here is the **comments** notebook / nbviewer backup here

<iframe src="/assets/notebooks/insomnia_comments.html" width="100%" height="600px"></iframe> 

I used Claude 3.5 Sonnet on the resulting csv files to identify the most mentioned drug therapies for the treatment of insomnia:

[![Claude Screenshot1](/assets/images/claude-prompt.png)]

Out of a total of 58,195 drug mentions analyzed:

Zolpidem (including mentions as Ambien) is the most frequently mentioned drug, accounting for nearly one-third of all mentions
Melatonin is the second most common, representing about a quarter of all mentions
The top three drugs (Zolpidem, Melatonin, and Trazodone) together account for approximately 73% of all insomnia drug mentions in the dataset
There's a significant presence of both dedicated sleep medications and medications that are sometimes prescribed off-label for sleep (such as quetiapine, antidepressants, and benzodiazepines)

I requested to add the different formulations the drugs are available in:

| Rank | Drug/Molecule | Count | Percentage | Available Formulations |
|---|---|---|---|---|
| 1 | Zolpidem (Ambien) | 18,517 | 19.59% | Tablets (IR, CR), Sublingual tablets, Oral spray |
| 2 | Melatonin | 15,182 | 16.06% | Tablets, Capsules, Gummies, Sublingual tablets, Liquid, Time-release tablets |
| 3 | Quetiapine (Seroquel) | 10,603 | 11.22% | Tablets (IR, XR), Oral suspension |
| 4 | Trazodone | 8,792 | 9.30% | Tablets (IR, CR), Oral solution |
| 5 | Mirtazapine (Remeron) | 5,777 | 6.11% | Tablets, Orally disintegrating tablets, Oral solution |
| 6 | Eszopiclone (Lunesta) | 5,729 | 6.06% | Tablets |
| 7 | Alprazolam (Xanax) | 5,008 | 5.30% | Tablets (IR, XR), Oral solution, Orally disintegrating tablets |
| 8 | Lemborexant (Dayvigo) | 3,419 | 3.62% | Tablets |
| 9 | Clonazepam (Klonopin) | 3,316 | 3.51% | Tablets, Orally disintegrating tablets, Oral solution |
| 10 | Hydroxyzine (Vistaril) | 2,713 | 2.87% | Tablets, Capsules, Oral solution, IM injection |
| 11 | Gabapentin (Neurontin) | 2,366 | 2.50% | Capsules, Tablets, Oral solution |
| 12 | Doxepin (Silenor) | 2,340 | 2.48% | Tablets, Capsules, Oral solution, Topical cream |
| 13 | Lorazepam (Ativan) | 2,272 | 2.40% | Tablets, Oral solution, IV/IM injection, Sublingual tablets |
| 14 | Daridorexant (Quviviq) | 1,689 | 1.79% | Tablets |
| 15 | Diazepam (Valium) | 1,680 | 1.78% | Tablets, Oral solution, IV/IM injection, Rectal gel |

